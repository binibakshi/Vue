(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["employeeInfo"],{"0a39":function(e,t,s){"use strict";var r=s("983d"),o=s.n(r);o.a},"0d40":function(e,t,s){},1216:function(e,t,s){},"14e7":function(e,t,s){"use strict";var r=s("7636"),o=s.n(r);o.a},"246e":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("setEmployeesHours")],1)},o=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("div",{staticClass:"littleMargin"},[s("div",{staticClass:"mossadInfoFlex"},[s("div",{staticClass:"MossadFlexItem"},[s("v-select",{staticStyle:{"max-hight":"40px"},attrs:{items:e.$store.state.years,"item-text":"hebrewYear","item-value":"year",label:"שנה"},on:{change:function(t){return e.onYearChanged()}},model:{value:e.selectedYear,callback:function(t){e.selectedYear=t},expression:"selectedYear"}})],1),s("mossadHours",{attrs:{mossadInfo:e.mossadInfo}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.mossadInfo.maxHours&&0!=e.mossadInfo.maxHours,expression:"mossadInfo.maxHours != null && mossadInfo.maxHours != 0"}]},[s("div",{staticClass:"flexEmployeeHours"},[s("v-autocomplete",{staticClass:"autoCompleteEmployees",attrs:{disabled:null==e.mossadInfo.maxHours||0==e.mossadInfo.maxHours,items:e.tzArray,"item-text":function(e){return e.firstName+" "+e.lastName+" - "+e.empId},"item-value":"empId",label:"תעודת זהות",placeholder:"חפש","hide-selected":""},on:{change:function(t){return e.getEmployeeInfo()}},model:{value:e.empId,callback:function(t){e.empId=t},expression:"empId"}}),s("div",[s("employeeHours",{attrs:{employeeInfo:e.employeeInfo,empHoursTable:e.empHoursTable,estimateJobPercent:e.estimateJobPercent,workInReforms:e.workInReforms,datesRange:e.datesRange,reformTypes:e.reformTypes,selectedYear:e.selectedYear}})],1)],1),null!=e.empId?s("v-row",[s("v-col",{attrs:{cols:"12",md:"3",sm:"3"}},[s("v-select",{staticClass:"autoCompleteEmployees",attrs:{items:e.filterReformTypeByMossad(),"item-text":"name","item-value":"reformId",label:"בחר רפורמה",multiple:"","single-line":""},model:{value:e.selectedReforms,callback:function(t){e.selectedReforms=t},expression:"selectedReforms"}})],1)],1):e._e(),null!=e.employeeInfo&&null!=e.selectedReforms?s("div",e._l(e.selectedReforms,(function(t,r){return s("v-card",{key:r,staticClass:"littleSpace center"},[s("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.circleProgress,expression:"circleProgress"}],attrs:{size:100,color:"primary",indeterminate:""}}),s("weeklyHours",{directives:[{name:"show",rawName:"v-show",value:!e.circleProgress,expression:"!circleProgress"}],key:e.compId,attrs:{empId:e.empId,selectedYear:e.selectedYear,reformType:t,isMother:e.employeeInfo.mother,ageHours:e.ageHours,codeDescription:e.getRelevantCodesDescription(t),jobRewardTypes:e.jobRewardTypes,rewardsHours:e.getRelevantRewardHours(t),existData:e.getRelevantData(t),existTeacherHours:e.getRelevantTeacherHours(t)}})],1)})),1):e._e()],1)])])},a=[],i=(s("4de4"),s("7db0"),s("4160"),s("caad"),s("13d5"),s("b680"),s("2532"),s("159b"),s("96cf"),s("1da1")),u=s("bc3a"),d=s.n(u),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mossadInfoGrid"},[s("div",[s("p",[e._v("מוסד - "+e._s(e.mossadInfo.mossadName))])]),s("div",{staticClass:"mossadInfoGridItem"},[s("a",{on:{click:function(t){return e.navToReport()}}},[e._v('ש"ש פרונטלי מאויש - '+e._s(e.mossadInfo.currHours))])]),s("div",{staticClass:"mossadInfoGridItem"},[s("p",[e._v(" יתרת שעות - "+e._s(e.getTwoDigits(e.mossadInfo.maxHours-e.mossadInfo.currHours))+" ")])]),s("div",{staticClass:"mossadInfoGridItem"},[s("p",[e._v("מגבלת שעות- "+e._s(e.mossadInfo.maxHours))])]),s("div",{staticClass:"mossadInfoGridItem"},[s("p",[e._v(" אחוז איוש - "+e._s(e.getTwoDigits(e.mossadInfo.currHours/e.mossadInfo.maxHours*100))+"% ")])])])},l=[],h={props:["mossadInfo"],data:function(){return{}},methods:{getTwoDigits:function(e){return isNaN(e)?"":parseFloat(e).toFixed(2)},navToReport:function(){var e=this.$router.resolve({path:"/report/reportWeeklyHours"});window.open(e.href)}}},m=h,f=(s("3aa7"),s("2877")),p=Object(f["a"])(m,c,l,!1,null,"6befe7e5",null),g=p.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!=e.empId?s("div",{staticClass:"reformTypeTables"},[s("h1",{staticClass:"center"},[e._v(e._s(e._reformDiscription))]),e._l(e.tablesArray,(function(t,r){return s("div",{key:r},[s("div",{staticClass:"sideBySide"},[s("div",{attrs:{id:"right"}},[s("v-text-field",{attrs:{label:"מתאריך",type:"date",min:e.datesRange.min,max:e.datesRange.max},on:{change:function(s){return e.setDatesIfChange(t)}},model:{value:t.begda,callback:function(s){e.$set(t,"begda",s)},expression:"table.begda"}},[e._v("מתאריך")]),s("v-text-field",{attrs:{label:"עד תאריך",type:"date",min:e.datesRange.min,max:e.datesRange.max},on:{change:function(s){return e.setDatesIfChange(t)}},model:{value:t.endda,callback:function(s){e.$set(t,"endda",s)},expression:"table.endda"}},[e._v("עד תאריך")])],1),s("div",{attrs:{id:"left"}},[8!=e.reformType?s("weeklyHoursTable",{attrs:{empId:e.empId,reformType:e.reformType,isMother:e.isMother,ageHours:e.ageHours,existData:t.data,existTeacherHours:e.existTeacherHours,begda:t.begda,endda:t.endda,codeDescription:e.codeDescription,jobRewardTypes:e.jobRewardTypes,rewardsHours:e.rewardsHours}}):e._e(),8==e.reformType?s("adminHoursTable",{attrs:{existTeacherHours:e.existTeacherHours,empId:e.empId,begda:t.begda,endda:t.endda}}):e._e()],1)])])}))],2):e._e()},y=[],I=(s("b0c0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!=e.empId&&0!=e.reformType?s("div",[s("table",{attrs:{id:"t01"}},[e._m(0),s("tbody",[e._l(e.newHours,(function(t,r){return s("tr",{key:r},[s("td",[s("div",{attrs:{id:"additionalActions"}},[t.type==e.frontalConst?s("v-icon",{attrs:{id:"myPlusIcon",dense:""},on:{click:function(t){return e.addNewRow(r)}}},[e._v("mdi-plus-circle-outline")]):e._e(),t.type==e.frontalConst?s("v-icon",{attrs:{id:"myMinusIcon",dense:""},on:{click:function(t){return e.removeRow(r)}}},[e._v("mdi-minus-circle-outline")]):e._e()],1)]),s("td",[e._v(e._s(e.convertReformDescription(t.type)))]),s("td",{staticStyle:{"padding-right":"10px"}},[t.type==e.frontalConst?s("v-autocomplete",{staticClass:"mySelectOption",attrs:{items:e.relevantCodes(t),"hide-selected":"","item-text":function(e){return e.code+" - "+e.codeDescription},"item-value":"code"},on:{change:function(s){return e.onCodeSelect(t)}},model:{value:t.code,callback:function(s){e.$set(t,"code",s)},expression:"row.code"}}):e._e(),t.type!=e.frontalConst?s("h4",{staticStyle:{"text-align":"right"}},[e._v(" "+e._s(t.code)+" - "+e._s(e.currCodeDescription(t.code))+" ")]):e._e()],1),s("td",[e.isBagrutReward(t.code)?s("router-link",{attrs:{title:"מעבר לגמולי בגרות",to:{name:"AdditionalRewards"}}},[e._v(" "+e._s(t.hours)+" ")]):e._e(),e.isJobReward(t.code)?s("router-link",{attrs:{title:"מעבר לגמולי תפקיד",to:{name:"jobRewards"}}},[e._v(" "+e._s(t.hours)+" ")]):e._e(),e.isRewradHours(t.code)?e._e():s("input",{directives:[{name:"model",rawName:"v-model",value:t.hours,expression:"row.hours"}],attrs:{id:"hours",type:"number",min:"0",step:"0.1",disabled:t.code<=0||t.type!=e.frontalConst||e.isRewradHours(t.code)},domProps:{value:t.hours},on:{input:[function(s){s.target.composing||e.$set(t,"hours",s.target.value)},function(t){return e.getPauseAndPrivateHours()}]}})],1),s("td",{staticClass:"disableStyle"}),e._l(t.week,(function(r,o){return s("td",{key:o},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.week[o],expression:"row.week[index2]"}],attrs:{type:"number",min:"0",step:"0.1",disabled:t.hours<=0},domProps:{value:t.week[o]},on:{input:function(s){s.target.composing||e.$set(t.week,o,s.target.value)}}})])})),s("td",{staticClass:"disableStyle",style:{color:0==e.validRowsHours(t)?"red":"inherit"}},[e._v(" "+e._s(e.getTwoDigits(e.leftHours(t)))+" ")])],2)})),s("tr",{staticClass:"summaryRow"},[s("td"),s("td",[e._v("סך")]),s("td",[e._v("--")]),s("td",[e._v(e._s(e.hoursAmount()))]),s("td",[e._v(" "+e._s(e.getTwoDigits(this.calcJobPercent(this.reformType,this.hoursAmount(),this.ageHours,this.isMother)))+"% ")]),e._l(parseInt(6),(function(t,r){return s("td",{key:r},[e._v(" "+e._s(e.dayAmount(t-1))+" ")])})),s("td",{style:{color:0==e.validTotalHours()?"red":"inherit"}},[e._v(" "+e._s(e.getTwoDigits(e.leftTableHours()))+" ")])],2)],2)]),s("v-row",{staticClass:"center",staticStyle:{"margin-top":"auto","margin-bottom":"auto"}},[s("v-btn",{staticClass:"myBtn",attrs:{color:"primary"},on:{click:function(t){return e.saveHours()}}},[e._v("שמור שעות")]),s("v-btn",{staticClass:"myBtn",attrs:{color:""},on:{click:function(t){return e.cleanWeeklyData()}}},[e._v("נקה")])],1)],1):e._e()}),w=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th"),s("th",[e._v("סוג")]),s("th",[e._v("קוד פיצול")]),s("th",[e._v("שעות")]),s("th",[e._v("אחוז משרה")]),s("th",[e._v("א'")]),s("th",[e._v("ב'")]),s("th",[e._v("ג'")]),s("th",[e._v("ד'")]),s("th",[e._v("ה'")]),s("th",[e._v("ו'")]),s("th",[e._v("הפרש")])])])}],b=(s("a630"),s("d81d"),s("a434"),s("d3b7"),s("6062"),s("3ca3"),s("ddb0"),s("56d7")),H={data:function(){return{}},methods:{calcJobPercent:function(e,t,s,r){return 0==t?0:1==e||7==e?this.getOlamYashanJobPercent(s,r,t):2==e?this.getOfekHasashJobPercent(s,r,t):5==e?this.getOzLetmuraJobPercent(s,r,t):8==e?this.getMinhalaJobPercent(s,r,t):void 0},getOlamYashanJobPercent:function(e,t,s){var r=0,o=24;return o-=e,r=s/o*100,t&&r>79&&(r*=1.1),r},getOfekHasashJobPercent:function(e,t,s){var r=0,o=36;return o-=e,t&&(o-=2),r=s/o*100,r},getOzLetmuraJobPercent:function(e,t,s){var r=0,o=40;return o-=e,r=s/o*100,t&&r>78.75&&(r+=7),r},getMinhalaJobPercent:function(e,t,s){var r=0,o=20;return r=s/o*100,r}}},x=1,T=2,D=3,_={name:"weeklyHours",props:["empId","reformType","isMother","ageHours","existData","existTeacherHours","begda","endda","codeDescription","jobRewardTypes","rewardsHours"],data:function(){return{newHours:[],tableBegda:"",tableEndda:"",datesRange:{min:"",max:""},teacherEmployeeDetails:[],teacherHours:[],tablesArray:[],empOptions:[],reformTypes:[],frontalCodes:[],frontalConst:x}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initilizer(),t.next=3,e.getEmployeeOptions();case 3:e.setFrontalCodes(),e.setBegdaEndda(),e.setExistData(),e.setExistRewards(),e.getPauseAndPrivateHours(),e.setPrivateAndPauseCodes(e.newHours.find((function(e){return e.type==x})).code),e.sortTable();case 10:case"end":return t.stop()}}),t)})))()},methods:{initilizer:function(){this.newHours=[],5==this.reformType||2==this.reformType?this.newHours=[{type:x,hours:0,code:"",week:[0,0,0,0,0,0]},{type:T,hours:0,code:"",week:[0,0,0,0,0,0]},{type:D,hours:0,code:"",week:[0,0,0,0,0,0]}]:this.newHours=[{type:x,hours:0,code:"",week:[0,0,0,0,0,0]}]},getPauseAndPrivateHours:function(){var e;if(2==this.reformType||5==this.reformType){var t=Math.round(this.newHours.filter((function(e){return e.type==x})).reduce((function(e,t){return e+parseFloat(t.hours)}),0));t<=0||(e=this.empOptions.find((function(e){return e.frontalHours==t})),e?(0==e.pauseHours&&(this.newHours.find((function(e){return e.type==D})).week=[0,0,0,0,0,0]),0==e.privateHours&&(this.newHours.find((function(e){return e.type==T})).week=[0,0,0,0,0,0]),this.newHours.find((function(e){return e.type==D})).hours=e.pauseHours,this.newHours.find((function(e){return e.type==T})).hours=e.privateHours):console.log("error currOption not found value"))}},getEmployeeOptions:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/calcHours/options",{params:{reformType:e.reformType,empId:e.empId,year:e.$store.state.selectedYear}}).then((function(t){e.empOptions=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}));case 2:case"end":return t.stop()}}),t)})))()},saveHours:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=!0,e.newHours.forEach((function(t){0!=e.validRowsHours(t)||(s=!1)})),0!=s){t.next=5;break}return alert("יש למלא שעות תקינות"),t.abrupt("return",!1);case 5:return e.setNewHoursForSave(),t.next=8,d()({url:"/teacherHours/saveAll",method:"post",data:e.teacherHours}).then((function(){})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})}));case 8:return t.next=10,d()({url:"/teacherEmploymentDetails/saveAll",method:"post",data:e.teacherEmployeeDetails}).then((function(){alert("הנתונים נשמרו בהצלחה"),b["bus"].$emit("changeWeeklyHours")})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})}));case 10:case"end":return t.stop()}}),t)})))()},setNewHoursForSave:function(){var e=this;this.teacherEmployeeDetails=[],this.newHours.forEach((function(t){t.week.forEach((function(s,r){e.teacherEmployeeDetails.push({empId:e.empId,mossadId:e.$store.state.logginAs,changedBy:e.$store.state.username,empCode:t.code,begda:new Date(e.begda),endda:new Date(e.endda),day:r,hours:s})})),t.type==x&&e.teacherHours.push({empId:e.empId,mossadId:e.$store.state.logginAs,changedBy:e.$store.state.username,empCode:t.code,begda:new Date(e.begda),endda:new Date(e.endda),hours:t.week.reduce((function(e,t){return e+parseFloat(t)}),0).toFixed(2),reformType:e.reformType})}))},onCodeSelect:function(e){e.hours=0,this.isRewradHours(e.code)&&(e.hours=this.rewardsHours.filter((function(t){return t.employmentCode==e.code})).reduce((function(e,t){return e+parseFloat(t.hours)}),0),this.getPauseAndPrivateHours()),this.setPrivateAndPauseCodes(e.code)},setPrivateAndPauseCodes:function(e){2!=this.reformType&&5!=this.reformType||""==e||(5==this.reformType?(this.newHours.find((function(e){return e.type==T})).code=9601,this.newHours.find((function(e){return e.type==D})).code=9602):2==this.reformType&&(this.newHours.find((function(e){return e.type==D})).code=5468,this.newHours.find((function(e){return e.type==T})).code=5467))},setExistData:function(){var e,t=this,s={},r={};this.existData.forEach((function(r){e=t.codeDescription.find((function(e){return e.code==r.empCode})).hourType,e==x&&""!=t.newHours.find((function(t){return t.type==e})).code?void 0==t.newHours.find((function(e){return e.code==r.empCode}))?(s={type:x,hours:0,code:r.empCode,week:[0,0,0,0,0,0]},s.week[r.day]=r.hours,t.newHours.push(s)):t.newHours.find((function(e){return e.code==r.empCode})).week[r.day]+=r.hours:(t.newHours.find((function(t){return t.type==e})).week[r.day]=r.hours,t.newHours.find((function(t){return t.type==e})).code=r.empCode)})),this.existTeacherHours.forEach((function(s){e=t.codeDescription.find((function(e){return e.code==s.empCode})).hourType,r=t.newHours.find((function(e){return e.code==s.empCode})),void 0!=r?r.hours=s.hours:(r=t.newHours.find((function(t){return t.type==e&&!t.code})),void 0!=r?(r.code=s.empCode,r.hours=s.hours):t.newHours.push({type:x,hours:s.hours,code:s.empCode,week:[0,0,0,0,0,0]}))}))},setExistRewards:function(){var e=this,t=0,s={};Array.from(new Set(this.rewardsHours.map((function(e){return e.employmentCode})))).forEach((function(r){t=e.rewardsHours.filter((function(e){return e.employmentCode==r})).reduce((function(e,t){return e+parseFloat(t.hours)}),0).toFixed(2),0==t||(""==e.newHours.find((function(e){return e.type==x})).code?(e.newHours.find((function(e){return e.type==x})).hours+=1*t,e.newHours.find((function(e){return e.type==x})).code=r):(s=e.newHours.find((function(e){return e.code==r})),s?s.hours=t:e.newHours.push({code:r,hours:t,type:1,week:[0,0,0,0,0,0]})))}))},relevantCodes:function(e){var t=this;return this.frontalCodes.filter((function(s){return!t.newHours.map((function(e){return e.code})).includes(s.code)||s.code==e.code}))},removeRow:function(e){0!==e||0!=this.newHours.filter((function(t,s){return t.type==x&&s!=e})).length?this.newHours[e].type==x&&(this.newHours.splice(e,1),this.getPauseAndPrivateHours()):this.cleanWeeklyData()},addNewRow:function(e){this.newHours.splice(e+1,0,{type:x,hours:0,code:"",week:[0,0,0,0,0,0]})},sortTable:function(){this.newHours.sort((function(e,t){return e.type-t.type}))},setBegdaEndda:function(){this.tableBegda=this.FormatDate(this.begda),this.tableEndda=this.FormatDate(this.endda)},FormatDate:function(e){var t,s=new Date(e),r=s.getFullYear(),o=0,n=0;return o+=s.getMonth()+1,o<10&&(o="0"+o),s.getDate()<10&&(n="0"),n+=s.getDate(),t=r+"-"+o+"-"+n,t},isNumber:function(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)},getTwoDigits:function(e){return isNaN(e)||0==e?0:parseFloat(e).toFixed(2)},currCodeDescription:function(e){return void 0!=e&&e>0?void 0===this.codeDescription.find((function(t){return t.code==e}))?"":this.codeDescription.find((function(t){return t.code==e})).codeDescription:""},convertReformDescription:function(e){return e==T?"פרטני":e==D?"שהייה":"פרונטלי"},validRowsHours:function(e){return void 0==e.hours||0==this.leftHours(e)},validTotalHours:function(){return 0==this.leftTableHours()},leftHours:function(e){var t=e.week;return parseFloat(t.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0))-e.hours},leftTableHours:function(){var e=this;return this.newHours.reduce((function(t,s){return parseFloat(t)+e.leftHours(s)}),0)},hoursAmount:function(){var e=this;return this.newHours.filter((function(t){return e.isNumber(t.hours)})).reduce((function(e,t){return parseFloat(e)+parseFloat(t.hours)}),0).toFixed(2)},dayAmount:function(e){return this.newHours.reduce((function(t,s){return parseFloat(t)+parseFloat(s.week[e])}),0).toFixed(2)},cleanWeeklyData:function(){this.newHours.forEach((function(e){e.hours=0,e.week=[0,0,0,0,0,0]}))},setFrontalCodes:function(){var e=this;this.frontalCodes=this.codeDescription.filter((function(t){return(t.hourType==x||0==t.hourType)&&!e.newHours.find((function(e){return e.code==t.code}))}))},isRewradHours:function(e){return this.isBagrutReward(e)||this.isJobReward(e)},isBagrutReward:function(e){return 9671==e||2598==e},isJobReward:function(e){var t=this.jobRewardTypes.find((function(t){return t.employmentCode==e}));return void 0!=t}},mixins:[H]},R=_,k=(s("414a"),s("6544")),C=s.n(k),E=s("c6a6"),F=s("8336"),S=s("132d"),A=s("0fd9"),$=Object(f["a"])(R,I,w,!1,null,"79d30fd4",null),M=$.exports;C()($,{VAutocomplete:E["a"],VBtn:F["a"],VIcon:S["a"],VRow:A["a"]});var P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"adminHours center"},[s("v-text-field",{attrs:{label:"שעות",type:"number",min:"0"},on:{change:function(t){return e.handleHoursChanged()}},model:{value:e.hours,callback:function(t){e.hours=t},expression:"hours"}}),s("v-text-field",{attrs:{disabled:""}}),s("v-btn",{attrs:{color:"primary",dense:""},on:{click:function(t){return e.saveHours()}}},[e._v("שמור")])],1)},Y=[],N={props:["empId","begda","endda","existTeacherHours"],data:function(){return{hours:0}},mounted:function(){this.initilize()},methods:{initilize:function(){this.hours=this.existTeacherHours.reduce((function(e,t){return parseFloat(e)+parseFloat(t.hours)}),0).toFixed(2)},saveHours:function(){var e=this,t=[{empId:this.empId,mossadId:this.$store.state.logginAs,changedBy:this.$store.state.username,empCode:71,begda:new Date(this.begda),endda:new Date(this.endda),hours:parseFloat(this.hours).toFixed(2),reformType:8}];d()({url:"/teacherHours/saveAll",method:"post",data:t}).then((function(){alert("הנתונים נשמרו בהצלחה")})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})}))},handleHoursChanged:function(){this.hours<=0&&(this.hours=0)}}},O=N,B=(s("0a39"),s("8654")),j=Object(f["a"])(O,P,Y,!1,null,"32368c06",null),V=j.exports;C()(j,{VBtn:F["a"],VTextField:B["a"]});var J={name:"weeklyHours",props:["empId","reformType","isMother","ageHours","selectedYear","codeDescription","existData","existTeacherHours","jobRewardTypes","rewardsHours"],components:{weeklyHoursTable:M,adminHoursTable:V},data:function(){return{datesRange:{min:"",max:""},tablesArray:[],reformTypes:[]}},created:function(){this.getReformTypes()},mounted:function(){this.setBegdaEndda(),this.gruopByBegdaEndda()},methods:{gruopByBegdaEndda:function(){var e=this;this.tablesArray=[],this.existData.forEach((function(t){var s=e.tablesArray.find((function(s){return s.begda==e.FormatDate(t.begda)&&s.endda==e.FormatDate(t.endda)}));null!=s?s.data.push(t):e.tablesArray.push({begda:e.FormatDate(t.begda),endda:e.FormatDate(t.endda),data:[t]})})),this.setDefualtValues()},getReformTypes:function(){var e=this;d.a.get("/reformTypes/relevant").then((function(t){e.reformTypes=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},setBegdaEndda:function(){this.datesRange.min=new Date(this.selectedYear-1,8,1),this.datesRange.max=new Date(this.selectedYear,5,20)},setDefualtValues:function(){0==this.tablesArray.length&&this.tablesArray.push({begda:this.FormatDate(this.datesRange.min),endda:this.FormatDate(this.datesRange.max),data:[]})},addWeeklHoursTable:function(){var e=new Date(this.tablesArray.reduce((function(e,t){return e.endda>t.endda?e:t})).endda);e.setDate(e.getDate()+1),e<this.datesRange.max?this.tablesArray.push({begda:this.FormatDate(e),endda:this.FormatDate(this.datesRange.max),data:[]}):alert("אין אפשרות ליצור יותר מרושמה אחת על תאריכים חופפים")},removeWeeklHoursTable:function(){this.tablesArray.pop()},setDatesIfChange:function(e){(e.endda>this.FormatDate(this.datesRange.max)||e.endda<this.FormatDate(this.datesRange.min))&&(e.endda=this.FormatDate(this.datesRange.max)),(e.begda>this.FormatDate(this.datesRange.max)||e.begda<this.FormatDate(this.datesRange.min))&&(e.begda=this.FormatDate(this.datesRange.min))},FormatDate:function(e){var t,s=new Date(e),r=s.getFullYear(),o=0,n=0;return o+=s.getMonth()+1,o<10&&(o="0"+o),s.getDate()<10&&(n="0"),n+=s.getDate(),t=r+"-"+o+"-"+n,t}},computed:{_reformDiscription:function(){var e=this,t=this.reformTypes.find((function(t){return t.reformId==e.reformType}));return void 0!=t?t.name:""}}},z=J,W=(s("2c83"),Object(f["a"])(z,v,y,!1,null,"19161245",null)),L=W.exports;C()(W,{VTextField:B["a"]});var U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"wrapper-grid"},[s("div",{staticClass:"grid-element"},[s("p",[e._v("שם פרטי")]),e._v(" "+e._s(e.employeeInfo.firstName)+" ")]),s("div",{staticClass:"grid-element"},[s("p",[e._v("שם משפחה")]),e._v(" "+e._s(e.employeeInfo.lastName)+" ")]),s("div",{staticClass:"grid-element"},[s("p",[e._v("גיל")]),e._v(" "+e._s(e.getAge)+" ")]),s("div",{staticClass:"grid-element"},[s("p",[e._v("שעות גיל")]),e._v(" "+e._s(e.getAgeHours())+" ")]),s("div",{staticClass:"grid-element"},[s("div",{staticClass:"detailsTable"},[s("table",[e._m(0),s("tbody",e._l(e.empHoursTable,(function(t,r){return s("tr",{key:r},[s("td",[e._v(e._s(e.getRowType(t.type)))]),e._l(6,(function(r){return s("td",{key:r},[s("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on,a=o.attrs;return[s("span",e._g(e._b({on:{mouseover:function(s){return e.changeText(t.type,r-1)}}},"span",a,!1),n),[e._v(" "+e._s(t.week[r-1].hours))])]}}],null,!0)},[s("span",[e._v(e._s(e.hoverText))])])],1)})),s("td",[e._v(e._s(t.sum))]),s("td",[e._v(e._s(e.getTwoDigits(t.jobPercent))+"%")])],2)})),0)])]),s("div",{staticClass:"underTableDiv"},[s("div",{staticClass:"workInReform"},e._l(e.workInReforms,(function(t){return s("p",{key:t},[e._v(" "+e._s(e.getRreformDiscription(t)+", ")+" ")])})),0),s("div",[s("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[s("v-icon",e._g(e._b({staticClass:"mr-3 excelMDI",attrs:{large:""},on:{click:function(t){return e.exportEmployeeWeeklyHours()}}},"v-icon",o,!1),r),[e._v("mdi-file-excel-outline")])]}}])},[s("span",[e._v("ייצוא איוש שעות לאקסל")])])],1)])]),s("div",{staticClass:"grid-element"},[s("p",[e._v("אחוז קביעות")]),s("router-link",{attrs:{title:"דף אחוז קביעות משרה",to:{name:"setJobPercent"}}},[e._v(e._s(e.estimateJobPercent)+"% ")])],1)])])},G=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("th"),s("th",[e._v("א")]),s("th",[e._v("ב")]),s("th",[e._v("ג")]),s("th",[e._v("ד")]),s("th",[e._v("ה")]),s("th",[e._v("ו")]),s("th",[e._v("סך שעות")]),s("th",[e._v("אחוז משרה")])])}],K=s("87cf"),q={props:["employeeInfo","empHoursTable","estimateJobPercent","workInReforms","datesRange","reformTypes","selectedYear"],mixins:[K["a"]],data:function(){return{hoverText:"",mossadot:[]}},created:function(){this.getMossadot()},computed:{getAge:function(){if(!this.isNotEmpty(this.employeeInfo)){var e=new Date;e.setFullYear(this.selectedYear);var t=new Date(this.employeeInfo.birthDate),s=0,r=e.getFullYear()-t.getFullYear();return e.getUTCMonth()<t.getUTCMonth()&&(r-=1),s=e.getUTCMonth()-t.getUTCMonth(),s<0&&(s*=-1),s<10&&(s="0"+s),r+"."+s}}},methods:{getMossadot:function(){var e=this;d.a.get("mossadot/all").then((function(t){return e.mossadot=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},exportEmployeeWeeklyHours:function(){this.createWeeklyHoursToEmployee(this.employeeInfo.empId,this.$store.state.logginAs,this.datesRange.min,this.datesRange.max)},formatIsMother:function(){if(!this.isNotEmpty(this.employeeInfo))return!0===this.employeeInfo.mother?"כן":"לא"},getAgeHours:function(){if(!this.isNotEmpty(this.employeeInfo)){var e=new Date(this.employeeInfo.birthDate),t=new Date,s=new Date(t.getFullYear(),8,1);t.getMonth()>=8&&s.setFullYear(s.getFullYear()+1);var r=s.getFullYear()-e.getFullYear();return r<50?0:r>55?4:2}},getRowType:function(e){return 0===e?"במוסד":"בכל המוסדות"},changeText:function(e,t){this.hoverText=this.getMossadotDescription(this.empHoursTable[e].week[t].mossadot)},getMossadotDescription:function(e){var t=this;if(null==e)return"";var s="";return e.forEach((function(e){s+=t.mossadot.find((function(t){return t.mossadId==e})).mossadName+", "})),s},getRreformDiscription:function(e){var t=this.reformTypes.find((function(t){return t.reformId==e}));return void 0!=t?t.name:""},getTwoDigits:function(e){return isNaN(e)?"":parseFloat(e).toFixed(2)},isNotEmpty:function(e){for(var t in e)return!1;return!0}}},Q=q,X=(s("4bca"),s("3a2f")),Z=Object(f["a"])(Q,U,G,!1,null,"789b9af8",null),ee=Z.exports;C()(Z,{VIcon:S["a"],VTooltip:X["a"]});var te={name:"setEmployeesHours",components:{weeklyHours:L,mossadHours:g,employeeHours:ee},data:function(){return{selectedReforms:[],selectedYear:0,empId:null,ageHours:0,tzArray:[],datesRange:{min:"",max:""},employeeInfo:{},existData:[],existTeacherHours:[],reformTypes:[],workInReforms:[],codeDescription:[],empHoursTable:[],jobRewardTypes:[],mossadot:[],rewardsHours:[],mossadInfo:{mossadId:"",mossadName:"",maxHours:0,currHours:0},hoverText:"",compId:0,estimateJobPercent:0,circleProgress:!1}},created:function(){this.initilize(),this.getAllTz(),this.getCodeDescription(),this.getReformTypes(),this.getMossadHours(),this.getBagrutRewardsTypes()},mounted:function(){var e=this;null!=this.empId&&this.getEmployeeInfo(),b["bus"].$on("changeWeeklyHours",Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getAllEmpData(),e.getMossadHours();case 2:case"end":return t.stop()}}),t)}))))},methods:{initilize:function(){if(0!=this.$store.state.selectedYear)this.selectedYear=this.$store.state.selectedYear;else{var e=new Date;this.selectedYear=e.getMonth()>=8?e.getFullYear()+1:e.getFullYear()}0!=this.$store.state.empId&&(this.empId=this.$store.state.empId),this.mossadInfo.mossadId=this.$store.state.mossadId,this.mossadInfo.mossadName=this.$store.state.mossadInfo.mossadName,this.empHoursTable=[{week:[],sum:0,jobPercent:0,type:0},{week:[],sum:0,jobPercent:0,type:1}];for(var t=0;t<6;t++)this.empHoursTable[0].week.push({day:t,hours:0,mossadot:[]}),this.empHoursTable[1].week.push({day:t,hours:0,mossadot:[]});this.setBegdaEndda(),this.compId=0},onYearChanged:function(){this.$store.dispatch("setSelectedYear",this.selectedYear),this.getEmployeeInfo(),this.setBegdaEndda(),this.getMossadHours()},getAllTz:function(){var e=this;d.a.get("/employees/all").then((function(t){e.tzArray=t.data,0!=e.$store.state.empId&&(e.empId=e.tzArray.find((function(t){return t.empId==e.$store.state.empId})).empId)})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getEmployeeInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.circleProgress=!0,e.$store.dispatch("setEmpId",e.empId),t.next=4,d.a.get("/employees/byId",{params:{empId:e.empId}}).then((function(t){e.employeeInfo=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}));case 4:return e.calcAgeHours(),t.next=7,e.getAllEmpData();case 7:setTimeout((function(){return e.circleProgress=!1}),1e3);case 8:case"end":return t.stop()}}),t)})))()},getMossadHours:function(){var e=this;d.a.get("mossadHours/byId",{params:{mossadId:this.$store.state.logginAs,year:this.selectedYear}}).then((function(t){e.mossadInfo.currHours=t.data.currHours,e.mossadInfo.maxHours=t.data.maxHours})).catch((function(){e.mossadInfo.currHours=0,e.mossadInfo.maxHours=0,alert("לא נמצאו נתונים עבור מוסד בשנה זו בחר שנה אחרת או הוסף שעות למוסד")}))},getReformTypes:function(){var e=this;d.a.get("/reformTypes/relevant").then((function(t){e.reformTypes=t.data,e.filterReformTypeByMossad()})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getCodeDescription:function(){var e=this;d.a.get("/convertHours/all").then((function(t){e.codeDescription=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getAllEmpData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e.empId&&""!=e.empId){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,d.a.get("/teacherHours/byEmpIdAndMossadId",{params:{empId:e.empId,mossadId:e.$store.state.logginAs,begda:e.datesRange.min,endda:e.datesRange.max}}).then((function(t){e.existTeacherHours=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}));case 4:return t.next=6,d.a.get("/teacherEmploymentDetails/byId",{params:{empId:e.empId,begda:e.datesRange.min,endda:e.datesRange.max}}).then((function(t){e.existData=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}));case 6:return t.next=8,d.a.get("/teachersRewards/byEmpIdAndMossadAndYear",{params:{empId:e.empId,mossadId:e.$store.state.logginAs,year:e.selectedYear}}).then((function(t){e.rewardsHours=t.data})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})}));case 8:e.calcEmpHoursData(),e.getEstimateJobPercent(),e.compId+=1;case 11:case"end":return t.stop()}}),t)})))()},getBagrutRewardsTypes:function(){var e=this;d.a.get("jobRewards/all").then((function(t){e.jobRewardTypes=t.data})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})}))},getEstimateJobPercent:function(){var e=this;d.a.get("/jobPercent/byId",{params:{empId:this.empId,mossadId:this.$store.state.logginAs,year:this.selectedYear}}).then((function(t){t.data,t.data?e.estimateJobPercent=t.data.estimateJobPercent:e.estimateJobPercent=0})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},setBegdaEndda:function(){this.datesRange.min=this.formatDate(new Date(this.selectedYear-1,8,1)),this.datesRange.max=this.formatDate(new Date(this.selectedYear,5,21))},formatDate:function(e){var t,s=new Date(e),r=s.getFullYear(),o=0,n=0;return o+=s.getMonth()+1,o<10&&(o="0"+o),s.getDate()<10&&(n="0"),n+=s.getDate(),t=r+"-"+o+"-"+n,t},filterReformTypeByMossad:function(){return 2==this.$store.state.mossadInfo.mossadType?this.reformTypes.filter((function(e){return 1==e.reformId||5==e.reformId||7==e.reformId||2==e.reformId||8==e.reformId})):1==this.$store.state.mossadInfo.mossadType?this.reformTypes.filter((function(e){return 1==e.reformId||5==e.reformId||8==e.reformId})):this.reformTypes},getRelevantCodesDescription:function(e){return this.codeDescription.filter((function(t){return t.reformType==e}))},getRelevantData:function(e){var t=this;return this.existData.filter((function(s){return s.reformType==e&&s.mossadId==t.$store.state.logginAs}))},getRelevantTeacherHours:function(e){var t=this;return this.existTeacherHours.filter((function(s){return s.reformType==e&&s.mossadId==t.$store.state.logginAs}))},getRelevantRewardHours:function(e){return this.rewardsHours.filter((function(t){return t.reformId==e}))},calcAgeHours:function(){void 0===this.employeeInfo.birthDate&&(this.ageHours=0);var e=new Date(this.employeeInfo.birthDate),t=new Date;t.setUTCFullYear(this.selectedYear);var s=new Date(t.getFullYear(),8,1);t.getMonth()>=8&&s.setFullYear(s.getFullYear()+1);var r=s.getFullYear()-e.getFullYear();this.ageHours=r<50?0:r>55?4:2},calcEmpHoursData:function(){var e=this;this.workInReforms=[],this.empHoursTable=[{week:[],sum:0,jobPercent:0,type:0},{week:[],sum:0,jobPercent:0,type:1}];for(var t=0;t<6;t++)this.empHoursTable[0].week.push({day:t,hours:0,mossadot:[this.$store.state.logginAs]}),this.empHoursTable[1].week.push({day:t,hours:0,mossadot:[]});this.existData.forEach((function(t){t.mossadId==e.$store.state.logginAs&&(e.empHoursTable[0].week[t.day].hours+=t.hours,e.empHoursTable[0].sum+=t.hours),e.empHoursTable[1].week[t.day].hours+=t.hours,e.empHoursTable[1].sum+=t.hours,e.empHoursTable[1].week[t.day].mossadot.includes(t.mossadId)||e.empHoursTable[1].week[t.day].mossadot.push(t.mossadId),e.workInReforms.includes(t.reformType)||t.mossadId!=e.$store.state.logginAs||0==t.hours||e.workInReforms.push(t.reformType)})),this.empHoursTable[0].sum=this.empHoursTable[0].sum.toFixed(2),this.empHoursTable[1].sum=this.empHoursTable[1].sum.toFixed(2),this.rewardsHours.forEach((function(t){e.workInReforms.includes(t.reformId)||0==t.hours||e.workInReforms.push(t.reformId)})),this.existTeacherHours.forEach((function(t){e.workInReforms.includes(t.reformType)||0==t.hours||e.workInReforms.push(t.reformType)})),this.selectedReforms=this.workInReforms,this.reformTypes.forEach((function(t){var s=e.existData.filter((function(s){return s.reformType==t.reformId&&s.mossadId==e.$store.state.logginAs})).reduce((function(e,t){return e+parseFloat(t.hours)}),0).toFixed(2);e.empHoursTable[0].jobPercent+=e.calcJobPercent(t.reformId,s,e.ageHours,e.employeeInfo.mother);var r=e.existData.filter((function(e){return e.reformType==t.reformId})).reduce((function(e,t){return e+parseFloat(t.hours)}),0).toFixed(2);e.empHoursTable[1].jobPercent+=e.calcJobPercent(t.reformId,r,e.ageHours,e.employeeInfo.mother)}))},isNotEmpty:function(e){for(var t in e)return!1;return!0}},mixins:[H]},se=te,re=(s("14e7"),s("b0af")),oe=s("62ad"),ne=s("490a"),ae=s("b974"),ie=Object(f["a"])(se,n,a,!1,null,"244b96dc",null),ue=ie.exports;C()(ie,{VAutocomplete:E["a"],VCard:re["a"],VCol:oe["a"],VProgressCircular:ne["a"],VRow:A["a"],VSelect:ae["a"]});var de={name:"employeeInfo",components:{setEmployeesHours:ue},data:function(){return{}}},ce=de,le=Object(f["a"])(ce,r,o,!1,null,"22c0c3f6",null);t["default"]=le.exports},2532:function(e,t,s){"use strict";var r=s("23e7"),o=s("5a34"),n=s("1d80"),a=s("ab13");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~String(n(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},"2bfd":function(e,t,s){},"2c83":function(e,t,s){"use strict";var r=s("2ec7"),o=s.n(r);o.a},"2ec7":function(e,t,s){},"3aa7":function(e,t,s){"use strict";var r=s("bffd"),o=s.n(r);o.a},"414a":function(e,t,s){"use strict";var r=s("1216"),o=s.n(r);o.a},"4bca":function(e,t,s){"use strict";var r=s("0d40"),o=s.n(r);o.a},"615b":function(e,t,s){},7636:function(e,t,s){},"7db0":function(e,t,s){"use strict";var r=s("23e7"),o=s("b727").find,n=s("44d2"),a=s("ae40"),i="find",u=!0,d=a(i);i in[]&&Array(1)[i]((function(){u=!1})),r({target:"Array",proto:!0,forced:u||!d},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(i)},"983d":function(e,t,s){},a434:function(e,t,s){"use strict";var r=s("23e7"),o=s("23cb"),n=s("a691"),a=s("50c4"),i=s("7b0b"),u=s("65f0"),d=s("8418"),c=s("1dde"),l=s("ae40"),h=c("splice"),m=l("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,p=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h||!m},{splice:function(e,t){var s,r,c,l,h,m,y=i(this),I=a(y.length),w=o(e,I),b=arguments.length;if(0===b?s=r=0:1===b?(s=0,r=I-w):(s=b-2,r=p(f(n(t),0),I-w)),I+s-r>g)throw TypeError(v);for(c=u(y,r),l=0;l<r;l++)h=w+l,h in y&&d(c,l,y[h]);if(c.length=r,s<r){for(l=w;l<I-r;l++)h=l+r,m=l+s,h in y?y[m]=y[h]:delete y[m];for(l=I;l>I-r+s;l--)delete y[l-1]}else if(s>r)for(l=I-r;l>w;l--)h=l+r-1,m=l+s-1,h in y?y[m]=y[h]:delete y[m];for(l=0;l<s;l++)y[l+w]=arguments[l+2];return y.length=I-r+s,c}})},b0af:function(e,t,s){"use strict";s("615b");var r=s("10d2"),o=s("297c"),n=s("1c87"),a=s("58df");t["a"]=Object(a["a"])(o["a"],n["a"],r["a"]).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes(){return{"v-card":!0,...n["a"].options.computed.classes.call(this),"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised,...r["a"].options.computed.classes.call(this)}},styles(){const e={...r["a"].options.computed.styles.call(this)};return this.img&&(e.background=`url("${this.img}") center center / cover no-repeat`),e}},methods:{genProgress(){const e=o["a"].options.methods.genProgress.call(this);return e?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[e]):null}},render(e){const{tag:t,data:s}=this.generateRouteLink();return s.style=this.styles,this.isClickable&&(s.attrs=s.attrs||{},s.attrs.tabindex=0),e(t,this.setBackgroundColor(this.color,s),[this.genProgress(),this.$slots.default])}})},bffd:function(e,t,s){},c6a6:function(e,t,s){"use strict";s("2bfd");var r=s("b974"),o=s("8654"),n=s("d9f7"),a=s("80d2");const i={...r["b"],offsetY:!0,offsetOverflow:!0,transition:!1};t["a"]=r["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(e,t,s)=>s.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:r["a"].options.props.menuProps.type,default:()=>i},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...r["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(e=>this.getValue(e))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(e=>!this.hasItem(e)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(e=>{const t=Object(a["q"])(e,this.itemText),s=null!=t?String(t):"";return this.filter(e,String(this.internalSearch),s)})},internalSearch:{get(){return this.lazySearch},set(e){this.lazySearch=e,this.$emit("update:search-input",e)}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const e=r["a"].options.computed.$_menuProps.call(this);return e.contentClass=("v-autocomplete__content "+(e.contentClass||"")).trim(),{...i,...e}},searchIsDirty(){return null!=this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(e=>this.valueComparator(this.getValue(e),this.getValue(this.internalValue)))},listData(){const e=r["a"].options.computed.listData.call(this);return e.props={...e.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive(e){!e&&this.hasSlot&&(this.lazySearch=null)},items(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(e,t){e!==t&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===e.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(e){this.searchIsDirty||(this.multiple&&e===a["w"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===a["w"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==a["w"].backspace&&e!==a["w"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const e=this.selectedIndex,t=this.selectedItems[e];if(!this.isInteractive||this.getDisabled(t))return;const s=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==s)return void(this.selectedIndex=s);const r=this.selectedItems.length,o=e!==r-1?e:e-1,n=this.selectedItems[o];n?this.selectItem(t):this.setValue(this.multiple?[]:null),this.selectedIndex=o},clearableCallback(){this.internalSearch=null,r["a"].options.methods.clearableCallback.call(this)},genInput(){const e=o["a"].options.methods.genInput.call(this);return e.data=Object(n["a"])(e.data,{attrs:{"aria-activedescendant":Object(a["o"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(a["o"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot(){const e=r["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections(){return this.hasSlot||this.multiple?r["a"].options.methods.genSelections.call(this):[]},onClick(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput(e){if(this.selectedIndex>-1||!e.target)return;const t=e.target,s=t.value;t.value&&this.activateMenu(),this.internalSearch=s,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){const t=e.keyCode;r["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown(e){},onTabDown(e){r["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown(e){e.preventDefault(),this.activateMenu()},selectItem(e){r["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems(){r["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy(e){var t,s;if(-1===this.selectedIndex)return;const r=this.selectedItems[this.selectedIndex],o=this.getText(r);null==(t=e.clipboardData)||t.setData("text/plain",o),null==(s=e.clipboardData)||s.setData("text/vnd.vuetify.autocomplete.item+plain",o),e.preventDefault()}}})},caad:function(e,t,s){"use strict";var r=s("23e7"),o=s("4d64").includes,n=s("44d2"),a=s("ae40"),i=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!i},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")}}]);
//# sourceMappingURL=employeeInfo.4645677f.js.map