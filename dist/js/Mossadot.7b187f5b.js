(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Mossadot"],{"0569":function(e,t,s){"use strict";var a=s("4df5"),o=s.n(a);o.a},"20f6":function(e,t,s){},"2bfd":function(e,t,s){},"2fa4":function(e,t,s){"use strict";s("20f6");var a=s("80d2");t["a"]=Object(a["h"])("spacer","div","v-spacer")},"374a":function(e,t,s){},"4df5":function(e,t,s){},"62ad":function(e,t,s){"use strict";s("4b85");var a=s("2b0e"),o=s("d9f7"),i=s("80d2");const n=["sm","md","lg","xl"],r=(()=>n.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}))(),l=(()=>n.reduce((e,t)=>(e["offset"+Object(i["B"])(t)]={type:[String,Number],default:null},e),{}))(),d=(()=>n.reduce((e,t)=>(e["order"+Object(i["B"])(t)]={type:[String,Number],default:null},e),{}))(),c={col:Object.keys(r),offset:Object.keys(l),order:Object.keys(d)};function u(e,t,s){let a=e;if(null!=s&&!1!==s){if(t){const s=t.replace(e,"");a+="-"+s}return"col"!==e||""!==s&&!0!==s?(a+="-"+s,a.toLowerCase()):a.toLowerCase()}}const h=new Map;t["a"]=a["a"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...r,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:s,children:a,parent:i}){let n="";for(const o in t)n+=String(t[o]);let r=h.get(n);if(!r){let e;for(e in r=[],c)c[e].forEach(s=>{const a=t[s],o=u(e,s,a);o&&r.push(o)});const s=r.some(e=>e.startsWith("col-"));r.push({col:!s||!t.cols,["col-"+t.cols]:t.cols,["offset-"+t.offset]:t.offset,["order-"+t.order]:t.order,["align-self-"+t.alignSelf]:t.alignSelf}),h.set(n,r)}return e(t.tag,Object(o["a"])(s,{class:r}),a)}})},"885a":function(e,t,s){"use strict";var a=s("ce15"),o=s.n(a);o.a},9749:function(e,t,s){"use strict";var a=s("374a"),o=s.n(a);o.a},a6f6:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("mosssadotMenagement")],1)},o=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"wrapper",attrs:{"background-color":"#ffffe6"}},[s("v-card-title",{attrs:{"primary-title":""}},[e._v("ניהול מוסדות")]),s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-autocomplete",{attrs:{items:e.mossadot,color:"primary","hide-no-data":"","hide-selected":"","item-text":"mossadName","item-value":"mossadId",placeholder:"חפש מוסד","prepend-icon":"mdi-database-search","return-object":""},model:{value:e.mossadInfo,callback:function(t){e.mossadInfo=t},expression:"mossadInfo"}})],1),void 0!=e.mossadInfo.mossadId?s("v-col",{attrs:{cols:"12",md:"2"}},[s("h4",{staticClass:"centerize"},[e._v("קוד מוסד - "+e._s(e.mossadInfo.mossadId))])]):e._e(),s("v-btn",{staticClass:"centerize",attrs:{color:"success"},on:{click:function(t){return e.createMossad()}}},[e._v("צור מוסד")]),s("v-btn",{staticClass:"centerize",attrs:{color:"success"},on:{click:function(t){return e.onexport()}}},[e._v("ייצא לאקסל")])],1),null!=e.mossadInfo?s("mosssadDetails",{attrs:{mossadInfo:e.mossadInfo}}):e._e(),1==e.isNew&&void 0==e.mossadInfo.mossadId?s("createMossad"):e._e()],1)},n=[],r=(s("d81d"),s("bc3a")),l=s.n(r),d=s("1146"),c=s.n(d),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return Object.keys(this.mossadInfo).length>0?s("v-form",{staticClass:"test"},[s("v-row",[s("v-btn",{staticClass:"moveLeft",attrs:{fab:"",small:""},on:{click:function(t){e.isEditing=!e.isEditing}}},[e.isEditing?s("v-icon",[e._v("mdi-close")]):s("v-icon",[e._v("mdi-pencil")])],1),s("v-col",{attrs:{cols:"12"}},[s("p",[e._v("מוסד - "+e._s(e.mossadInfo.mossadName))])])],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{disabled:!e.isEditing,color:"indigo accent-1",label:"שם מוסד"},model:{value:e.mossadInfo.mossadName,callback:function(t){e.$set(e.mossadInfo,"mossadName",t)},expression:"mossadInfo.mossadName"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{items:e.mossadTypes,disabled:!e.isEditing,"item-text":"typeName","item-value":"typeId",label:"סוג  מוסד"},model:{value:e.mossadInfo.mossadType,callback:function(t){e.$set(e.mossadInfo,"mossadType",t)},expression:"mossadInfo.mossadType"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{disabled:!0,color:"white",label:"שעות במוסד"},model:{value:e.mossadInfo.currHours,callback:function(t){e.$set(e.mossadInfo,"currHours",t)},expression:"mossadInfo.currHours"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{disabled:!e.isEditing,color:"indigo accent-1",label:"מספר שעות מקסימלי"},model:{value:e.mossadInfo.maxHours,callback:function(t){e.$set(e.mossadInfo,"maxHours",t)},expression:"mossadInfo.maxHours"}})],1)],1),s("v-row",[s("v-spacer"),s("v-btn",{staticClass:"moveRight",attrs:{disabled:!e.isEditing,color:"success"},on:{click:function(t){return e.saveMossadInfo()}}},[e._v("שמור")])],1),void 0!=e.mossadInfo.mossadId?s("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.deleteMossad()}}},[e._v("מחק מוסד")]):e._e()],1):e._e()},h=[],m={name:"mosssadDetails",props:["mossadInfo"],data:function(){return{isEditing:null,isSaved:!1,mossadTypes:[]}},created:function(){this.getmossadTypes()},computed:{_mossadInfo:function(){return this.mossadInfo}},methods:{getmossadTypes:function(){var e=this;l.a.get("/mossadType/all").then((function(t){e.mossadTypes=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},saveMossadInfo:function(){var e=this,t=!1;return l()({url:"/mossadot/save",method:"post",data:this.mossadInfo}).then((function(){alert("הנתונים נשמרו בהצלחה"),t=!0})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})})),t},deleteMossad:function(){l.a.delete("/mossadot",{params:{mossadId:this.mossadInfo.mossadId}}).then().catch((function(e){return console.log(e)}))}}},f=m,p=(s("9749"),s("2877")),I=s("6544"),v=s.n(I),g=s("8336"),b=s("62ad"),y=s("58df"),x=s("7e2b"),S=s("3206"),_=Object(y["a"])(x["a"],Object(S["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0}),s={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=e.$watch("shouldValidate",a=>{a&&(this.errorBag.hasOwnProperty(e._uid)||(s.valid=t(e)))}):s.valid=t(e),s},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const s=this.watchers.find(e=>e._uid===t._uid);s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}}),w=s("132d"),V=s("0fd9"),k=s("b974"),C=s("2fa4"),M=s("8654"),T=Object(p["a"])(f,u,h,!1,null,"20a9ebb6",null),$=T.exports;v()(T,{VBtn:g["a"],VCol:b["a"],VForm:_,VIcon:w["a"],VRow:V["a"],VSelect:k["a"],VSpacer:C["a"],VTextField:M["a"]});var D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-form",{staticClass:"test"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:e.requiredFieldRull,color:"indigo accent-1",label:"שם מוסד"},model:{value:e.mossadInfo.mossadName,callback:function(t){e.$set(e.mossadInfo,"mossadName",t)},expression:"mossadInfo.mossadName"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:e.requiredFieldRull,color:"indigo accent-1",label:"קוד מוסד"},model:{value:e.mossadInfo.mossadId,callback:function(t){e.$set(e.mossadInfo,"mossadId",e._n(t))},expression:"mossadInfo.mossadId"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{items:e.mossadTypes,"item-text":"typeName","item-value":"typeId",label:"סוג  מוסד"},model:{value:e.mossadInfo.mossadType,callback:function(t){e.$set(e.mossadInfo,"mossadType",t)},expression:"mossadInfo.mossadType"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{color:"indigo accent-1",label:"מספר שעות מקסימלי"},model:{value:e.mossadInfo.maxHours,callback:function(t){e.$set(e.mossadInfo,"maxHours",t)},expression:"mossadInfo.maxHours"}})],1)],1),s("v-row",[s("v-spacer"),s("v-btn",{staticClass:"moveRight",attrs:{color:"success"},on:{click:function(t){return e.saveMossadInfo()}}},[e._v("שמור")])],1),void 0!=e.mossadInfo.mossadId?s("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.deleteMossad()}}},[e._v("מחק מוסד")]):e._e()],1)},E=[],N={name:"createMossad",data:function(){return{mossadInfo:{},isEditing:null,isSaved:!1,mossadTypes:[],requiredFieldRull:[function(e){return!!e||"שדה חובה"}]}},created:function(){this.getmossadTypes()},computed:{_mossadInfo:function(){return this.mossadInfo}},methods:{getmossadTypes:function(){var e=this;l.a.get("/mossadType/all").then((function(t){e.mossadTypes=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},saveMossadInfo:function(){var e=this,t=!1;return l()({url:"/mossadot/save",method:"post",data:this.mossadInfo}).then((function(){alert("הנתונים נשמרו בהצלחה"),t=!0})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})})),t},deleteMossad:function(){l.a.delete("/mossadot",{params:{mossadId:this.mossadInfo.mossadId}}).then().catch((function(e){return console.log(e)}))}}},B=N,O=(s("885a"),Object(p["a"])(B,D,E,!1,null,"98c99694",null)),F=O.exports;v()(O,{VBtn:g["a"],VCol:b["a"],VForm:_,VRow:V["a"],VSelect:k["a"],VSpacer:C["a"],VTextField:M["a"]});var j={name:"mosssadotMenagement",components:{mosssadDetails:$,createMossad:F},data:function(){return{isNew:!1,mossadInfo:{},mossadot:[]}},created:function(){this.getAllMossadot()},computed:{_mossadotName:function(){return this.mossadot.map((function(e){return e.mossadName}))}},methods:{getAllMossadot:function(){var e=this;l.a.defaults.headers["Authorization"]="Bearer"+this.$store.state.token,l.a.get("/mossadot/all").then((function(t){e.mossadot=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},createMossad:function(){this.isNew=!0,this.mossadInfo={}},onexport:function(){var e=this.mossadot;e.unshift({mossadId:"קוד מוסד",mossadName:"שם מוסד",mossadType:"סוג מוסד",maxHours:"מקסימום שעות",currHours:"שעות בפועל"});var t=c.a.utils.json_to_sheet(e,{skipHeader:!0,Views:[{RTL:!0}]}),s=c.a.utils.book_new();c.a.utils.book_append_sheet(s,t,"מוסדות"),this.set_right_to_left(s),c.a.writeFile(s,"מוסדות.xlsx")},set_right_to_left:function(e){e.Workbook||(e.Workbook={}),e.Workbook.Views||(e.Workbook.Views=[]),e.Workbook.Views[0]||(e.Workbook.Views[0]={}),e.Workbook.Views[0].RTL=!0}}},z=j,A=(s("0569"),s("c6a6")),H=s("b0af"),L=s("99d9"),R=Object(p["a"])(z,i,n,!1,null,"4c884008",null),W=R.exports;v()(R,{VAutocomplete:A["a"],VBtn:g["a"],VCard:H["a"],VCardTitle:L["c"],VCol:b["a"],VRow:V["a"]});var P={name:"mossadot",components:{mosssadotMenagement:W}},q=P,J=Object(p["a"])(q,a,o,!1,null,"2e297360",null);t["default"]=J.exports},c6a6:function(e,t,s){"use strict";s("2bfd");var a=s("b974"),o=s("8654"),i=s("d9f7"),n=s("80d2");const r={...a["b"],offsetY:!0,offsetOverflow:!0,transition:!1};t["a"]=a["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(e,t,s)=>s.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:a["a"].options.props.menuProps.type,default:()=>r},noFilter:Boolean,searchInput:{type:String,default:void 0}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...a["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(e=>this.getValue(e))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(e=>!this.hasItem(e)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(e=>this.filter(e,String(this.internalSearch),String(this.getText(e))))},internalSearch:{get(){return this.lazySearch},set(e){this.lazySearch=e,this.$emit("update:search-input",e)}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const e=a["a"].options.computed.$_menuProps.call(this);return e.contentClass=("v-autocomplete__content "+(e.contentClass||"")).trim(),{...r,...e}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(e=>this.valueComparator(this.getValue(e),this.getValue(this.internalValue)))},listData(){const e=a["a"].options.computed.listData.call(this);return e.props={...e.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive(e){!e&&this.hasSlot&&(this.lazySearch=void 0)},items(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},methods:{onFilteredItemsChanged(e,t){e!==t&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===e.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(e){this.searchIsDirty||(this.multiple&&e===n["u"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===n["u"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==n["u"].backspace&&e!==n["u"].delete||this.deleteCurrentItem())},deleteCurrentItem(){if(this.readonly)return;const e=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==e)return void(this.selectedIndex=e);const t=this.selectedItems[this.selectedIndex];if(this.getDisabled(t))return;const s=this.selectedIndex===e?this.selectedIndex-1:this.selectedItems[this.selectedIndex+1]?this.selectedIndex:-1;-1===s?this.setValue(this.multiple?[]:void 0):this.selectItem(t),this.selectedIndex=s},clearableCallback(){this.internalSearch=void 0,a["a"].options.methods.clearableCallback.call(this)},genInput(){const e=o["a"].options.methods.genInput.call(this);return e.data=Object(i["a"])(e.data,{attrs:{"aria-activedescendant":Object(n["m"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(n["m"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot(){const e=a["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections(){return this.hasSlot||this.multiple?a["a"].options.methods.genSelections.call(this):[]},onClick(e){this.isDisabled||(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput(e){if(this.selectedIndex>-1||!e.target)return;const t=e.target,s=t.value;t.value&&this.activateMenu(),this.internalSearch=s,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){const t=e.keyCode;a["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown(e){},onTabDown(e){a["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown(e){e.preventDefault(),this.activateMenu()},selectItem(e){a["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems(){a["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy(e){if(-1===this.selectedIndex)return;const t=this.selectedItems[this.selectedIndex],s=this.getText(t);e.clipboardData.setData("text/plain",s),e.clipboardData.setData("text/vnd.vuetify.autocomplete.item+plain",s),e.preventDefault()}}})},ce15:function(e,t,s){}}]);
//# sourceMappingURL=Mossadot.7b187f5b.js.map