(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10ebbe65"],{1276:function(e,t,r){"use strict";var n=r("d784"),a=r("44e7"),s=r("825a"),i=r("1d80"),o=r("4840"),c=r("8aa5"),l=r("50c4"),u=r("14c3"),d=r("9263"),p=r("d039"),f=[].push,h=Math.min,x=4294967295,g=!p((function(){return!RegExp(x,"y")}));n("split",2,(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=String(i(this)),s=void 0===r?x:r>>>0;if(0===s)return[];if(void 0===e)return[n];if(!a(e))return t.call(n,e,s);var o,c,l,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,g=new RegExp(e.source,p+"g");while(o=d.call(g,n)){if(c=g.lastIndex,c>h&&(u.push(n.slice(h,o.index)),o.length>1&&o.index<n.length&&f.apply(u,o.slice(1)),l=o[0].length,h=c,u.length>=s))break;g.lastIndex===o.index&&g.lastIndex++}return h===n.length?!l&&g.test("")||u.push(""):u.push(n.slice(h)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var a=i(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,a,r):n.call(String(a),t,r)},function(e,a){var i=r(n,e,this,a,n!==t);if(i.done)return i.value;var d=s(e),p=String(this),f=o(d,RegExp),v=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),w=new f(g?d:"^(?:"+d.source+")",m),y=void 0===a?x:a>>>0;if(0===y)return[];if(0===p.length)return null===u(w,p)?[p]:[];var R=0,b=0,E=[];while(b<p.length){w.lastIndex=g?b:0;var I,N=u(w,g?p:p.slice(b));if(null===N||(I=h(l(w.lastIndex+(g?0:b)),p.length))===R)b=c(p,b,v);else{if(E.push(p.slice(R,b)),E.length===y)return E;for(var T=1;T<=N.length-1;T++)if(E.push(N[T]),E.length===y)return E;b=R=I}}return E.push(p.slice(R)),E}]}),!g)},"14c3":function(e,t,r){var n=r("c6b6"),a=r("9263");e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var s=r.call(e,t);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},1674:function(e,t,r){},"2a7f":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("71d9"),a=r("80d2");const s=Object(a["h"])("v-toolbar__title"),i=Object(a["h"])("v-toolbar__items");n["a"]},"2fa4":function(e,t,r){"use strict";r("20f6");var n=r("80d2");t["a"]=Object(n["h"])("spacer","div","v-spacer")},4054:function(e,t,r){"use strict";var n=r("1674"),a=r.n(n);a.a},"8aa5":function(e,t,r){"use strict";var n=r("6547").charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},9263:function(e,t,r){"use strict";var n=r("ad6d"),a=r("9f7f"),s=RegExp.prototype.exec,i=String.prototype.replace,o=s,c=function(){var e=/a/,t=/b*/g;return s.call(e,"a"),s.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=c||u||l;d&&(o=function(e){var t,r,a,o,d=this,p=l&&d.sticky,f=n.call(d),h=d.source,x=0,g=e;return p&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),g=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(h="(?: "+h+")",g=" "+g,x++),r=new RegExp("^(?:"+h+")",f)),u&&(r=new RegExp("^"+h+"$(?!\\s)",f)),c&&(t=d.lastIndex),a=s.call(p?r:d,g),p?a?(a.input=a.input.slice(x),a[0]=a[0].slice(x),a.index=d.lastIndex,d.lastIndex+=a[0].length):d.lastIndex=0:c&&a&&(d.lastIndex=d.global?a.index+a[0].length:t),u&&a&&a.length>1&&i.call(a[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(a[o]=void 0)})),a}),e.exports=o},"9f7f":function(e,t,r){"use strict";var n=r("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,r){"use strict";var n=r("23e7"),a=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,r){"use strict";var n=r("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d1ac:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{attrs:{id:"bagrutRewardsReport"}},[r("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:e.headers,items:e.dataToDisplay,search:e.search,"footer-props":{"items-per-page-options":[20,50,100,-1],"items-per-page-text":"מספר תוצאות  :"},"no-data-text":"","item-key":"empId"},on:{"click:row":e.onRowClicked},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[r("v-card-title",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"10"}},[r("v-text-field",{attrs:{label:"Search",placeholder:"חפש","single-line":"",autocomplete:"off","hide-details":"","append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1)],1),r("v-spacer"),r("v-btn",{attrs:{color:"success"},on:{click:function(t){return e.exportDataToExcel()}}},[e._v("ייצא לקסל")]),r("v-btn",{attrs:{color:"success"},on:{click:function(t){return e.expandExcel()}}},[e._v("ייצא אקסל מורחב")])],1)]},proxy:!0},{key:"item.percent",fn:function(t){var r=t.item;return[e._v(e._s(e.getTwoDigits(r.percent))+"%")]}}],null,!0)})],1)])},a=[],s=(r("4de4"),r("7db0"),r("4160"),r("a630"),r("d81d"),r("13d5"),r("b680"),r("d3b7"),r("ac1f"),r("6062"),r("3ca3"),r("1276"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),i=r("bc3a"),o=r.n(i),c=r("87cf"),l={props:["selectedYear","selectedMossadId"],data:function(){return{search:"",rewards:[],additionalReward:[],employees:[],dataToDisplay:[],headers:[{text:"תעודת זהות",value:"empId"},{text:"שם פרטי",value:"firstName"},{text:"שם משפחה",value:"lastName"},{text:"גמול שעות",value:"hours"},{text:"גמול אחוזים",value:"percent"}],grades:[{text:"ט",value:9},{text:"י",value:10},{text:'י"א',value:11},{text:'י"ב',value:12}],isExternalRange:[{text:"חצוני",value:!0},{text:"פנימי",value:!1}],isSplitedRange:[{text:"לא",value:!1},{text:"כן",value:!0}]}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEmployees();case 2:return t.next=4,e.getBagrutRewards();case 4:return t.next=6,e.getRewards();case 6:case"end":return t.stop()}}),t)})))()},methods:{getRewards:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rewards=[],t.next=3,o.a.get("/teachersRewards/byMossadAndYearAndType",{params:{mossadId:e.selectedMossadId,year:e.selectedYear,rewardType:1}}).then((function(t){e.rewards=t.data,e.setDataToDisplay()})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})}));case 3:case"end":return t.stop()}}),t)})))()},getEmployees:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/employees/all").then((function(t){e.employees=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}));case 2:case"end":return t.stop()}}),t)})))()},getBagrutRewards:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("bagrutRewards/all").then((function(t){e.additionalReward=t.data})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})}));case 2:case"end":return t.stop()}}),t)})))()},setDataToDisplay:function(){var e=this;this.dataToDisplay=[];for(var t=Array.from(new Set(this.rewards.map((function(e){return e.empId})))),r=function(r){var n=t[r],a=e.employees.find((function(e){return e.empId==n}));e.dataToDisplay.push({empId:n,firstName:a.firstName,lastName:a.lastName,hours:e.rewards.filter((function(e){return e.empId==n})).reduce((function(e,t){return e+parseFloat(t.hours)}),0).toFixed(2),percent:e.rewards.filter((function(e){return e.empId==n})).reduce((function(e,t){return e+parseFloat(t.percent)}),0).toFixed(2)})},n=0;n<t.length;n++)r(n)},exportDataToExcel:function(){var e=this,t=[],r={year:"שנה",empId:"תעודת זהות",firstName:"שם פרטי",lastName:"שם משפחה",hours:"גמול שעות",percent:"גמול אחוזים"};this.dataToDisplay.forEach((function(r){t.push({year:e.selectedYear,empId:r.empId,firstName:r.firstName,lastName:r.lastName,hours:r.hours,percent:r.percent})})),this.downloadFile(t,r,"דוח שעות.xlsx","סיכום שעות")},onRowClicked:function(e){this.$store.dispatch("setEmpId",e.empId),this.$store.dispatch("setLoggedAs",this.selectedMossadId);var t=this.$router.resolve({name:"AdditionalRewards"});window.open(t.href)},expandExcel:function(){var e=this,t={empId:"תעודת זהות",firstName:"שם פרטי",lastName:"שם משפחה",mossadName:"שם מוסד",year:"שנה",studyName:"מקצוע",questionnaire:"שאלון",studyUnits:'יח"ל',grade:"שכבה",teachingClass:"כיתה",external:"סוג",split:"מפוצל",students:"תלמידים",hoursReward:"גמול שעות",percentReward:"גמול אחוזים",teacherPercent:"חלוקת אחוזים",secondTeacher:"מורה נוסף"},r=[],n={};this.rewards.forEach((function(t){n=e.additionalReward.find((function(e){return e.recordkey==t.rewardId})),r.push({empId:t.empId,firstName:e.employees.find((function(e){return e.empId==t.empId})).firstName,lastName:e.employees.find((function(e){return e.empId==t.empId})).lastName,mossadName:e.$store.state.mossadInfo.mossadName,year:e.selectedYear,studyName:n.studyName,questionnaire:n.questionnaire,studyUnits:n.studyUnits,external:e.isExternalRange.find((function(e){return e.value==t.external})).text,grade:e.grades.find((function(e){return e.value==t.grade})).text,teachingClass:t.teachingClass,split:e.isSplitedRange.find((function(e){return e.value==t.split})).text,students:t.students,hoursReward:t.hours,percentReward:t.percent,teacherPercent:t.teacherPercent,secondTeacher:t.secondTeacher})})),r.sort((function(e,t){return e.empId>t.empId?1:-1})),this.downloadFile(r,t,"גמולי בגרות.xlsx","גמולי בגרות")},getTwoDigits:function(e){return isNaN(e)?0:parseFloat(e).toFixed(2)}},mixins:[c["a"]]},u=l,d=(r("4054"),r("2877")),p=r("6544"),f=r.n(p),h=r("8336"),x=r("99d9"),g=r("62ad"),v=r("8fea"),m=r("0fd9"),w=r("2fa4"),y=r("8654"),R=r("71d9"),b=r("2a7f"),E=Object(d["a"])(u,n,a,!1,null,"727e3cd2",null);t["default"]=E.exports;f()(E,{VBtn:h["a"],VCardTitle:x["b"],VCol:g["a"],VDataTable:v["a"],VRow:m["a"],VSpacer:w["a"],VTextField:y["a"],VToolbar:R["a"],VToolbarTitle:b["a"]})},d784:function(e,t,r){"use strict";r("ac1f");var n=r("6eeb"),a=r("d039"),s=r("b622"),i=r("9263"),o=r("9112"),c=s("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=s("replace"),p=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,d){var h=s(e),x=!a((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),g=x&&!a((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[c]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!x||!g||"replace"===e&&(!l||!u||p)||"split"===e&&!f){var v=/./[h],m=r(h,""[e],(function(e,t,r,n,a){return t.exec===i?x&&!a?{done:!0,value:v.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),w=m[0],y=m[1];n(String.prototype,e,w),n(RegExp.prototype,h,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}d&&o(RegExp.prototype[h],"sham",!0)}}}]);
//# sourceMappingURL=chunk-10ebbe65.06283e5f.js.map