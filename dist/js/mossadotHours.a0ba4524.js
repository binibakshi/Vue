(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mossadotHours"],{"0d6b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mossadHours")],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",id:"mossadotTable",headers:t.mossadotHeaders,items:t.mossadotTable,search:t.search,"footer-props":{"items-per-page-options":[20,50,100,-1],"items-per-page-text":"מספר תוצאות  :"},"item-key":"mossadId"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[a("v-card-title",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{label:"Search",placeholder:"חפש","single-line":"",autocomplete:"off","hide-details":"","append-icon":"mdi-magnify"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-select",{attrs:{items:t.years,"item-text":"hebrewYear","item-value":"year",label:"שנה"},on:{change:function(e){return t.getAllMossadotHours()}},model:{value:t.selectedYear,callback:function(e){t.selectedYear=e},expression:"selectedYear"}})],1)],1)],1)],1),a("v-spacer")],1)]},proxy:!0},{key:"item.mossadName",fn:function(e){var a=e.item;return[t._v(t._s(t.getMossadName(a.mossadId)))]}},{key:"item.maxHours",fn:function(e){var s=e.item;return[a("v-text-field",{staticStyle:{"max-width":"75px"},attrs:{dense:"",disabled:s.disabled,type:"number"},model:{value:s.maxHours,callback:function(e){t.$set(s,"maxHours",e)},expression:"item.maxHours"}})]}},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editMossad(s)}}},"v-icon",r,!1),o),[t._v("mdi-pencil")])]}}],null,!0)},[a("span",[t._v(t._s(t.editText(s)))])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.saveMossad(s)}}},"v-icon",r,!1),o),[t._v("mdi-content-save")])]}}],null,!0)},[a("span",[t._v("שמור")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteMossad(s)}}},"v-icon",r,!1),o),[t._v("mdi-delete")])]}}],null,!0)},[a("span",[t._v("מחק")])])]}}],null,!0)})],1)},n=[],i=(a("7db0"),a("4160"),a("159b"),a("96cf"),a("1da1")),c=a("bc3a"),d=a.n(c),u={name:"mossadHours",components:{},data:function(){return{isNew:!1,mossadInfo:{},search:"",years:[],dialog:!1,selectedYear:0,mossadot:[],mossadotTable:[],mossadotHours:[],mossadTypes:[],mossadotHeaders:[{text:"מוסד",value:"mossadName"},{text:"מגבלת שעות",value:"maxHours"},{text:"שעות בפועל",value:"currHours"},{text:"פעולות",value:"actions",sortable:!1}]}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initilize(),e.next=3,t.getAllMossadot();case 3:return e.next=5,t.getAllMossadotHours();case 5:case"end":return e.stop()}}),e)})))()},methods:{editText:function(t){return 0!=t.disabled?"ערוך":"צפייה"},initilize:function(){this.years=[{year:2021,hebrewYear:'תשפ"א'},{year:2022,hebrewYear:'תשפ"ב'},{year:2023,hebrewYear:'תשפ"ג'},{year:2024,hebrewYear:'תשפ"ד'},{year:2025,hebrewYear:'תשפ"ה'}];var t=new Date;this.selectedYear=t.getFullYear(),t.getMonth()>=8&&this.selectedYear++},getAllMossadot:function(){var t=this;d.a.get("/mossadot/all").then((function(e){t.mossadot=e.data})).catch((function(e){return t.$store.dispatch("displayErrorMessage",{error:e})}))},getAllMossadotHours:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/mossadHours/byYear",{params:{year:t.selectedYear}}).then((function(e){t.mossadotHours=e.data})).catch((function(e){return t.$store.dispatch("displayErrorMessage",{error:e})}));case 2:t.orderMossadot();case 3:case"end":return e.stop()}}),e)})))()},getMossadName:function(t){var e=this.mossadot.find((function(e){return e.mossadId==t}));return null==e?"":e.mossadName},createMossad:function(){this.isNew=!0,this.mossadInfo={}},saveMossadInfo:function(){var t=this,e=!1;return d()({url:"/mossadHours/save",method:"post",data:this.mossadInfo}).then((function(){alert("הנתונים נשמרו בהצלחה"),e=!0,location.reload()})).catch((function(e){t.$store.dispatch("displayErrorMessage",{error:e})})),e},editMossad:function(t){t.disabled=!t.disabled},saveMossad:function(t){var e=this;d()({url:"/mossadHours/save",method:"post",data:t}).then((function(){alert("הנתונים נשמרו בהצלחה"),e.getAllMossadotHours()})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})}))},deleteMossad:function(t){var e=this;d.a.delete("/mossadHours/byId",{params:{mossadId:t.mossadId,year:t.year}}).then((function(){alert("פעולת המחיקה בוצעה בהצלחה"),location.reload()})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},cleanmossadInfo:function(){this.mossadInfo={}},orderMossadot:function(){var t=this;this.mossadotTable=[],this.mossadot.forEach((function(e){t.mossadotTable.push({mossadId:e.mossadId,mossadName:e.mossadName,mossadType:e.mossadType,currHours:0,maxHours:0,year:t.selectedYear,disabled:!0})})),this.mossadotTable.forEach((function(e){var a=t.mossadotHours.find((function(t){return t.mossadId==e.mossadId}));void 0!=a&&(e.maxHours=a.maxHours,e.currHours=a.currHours)}))}}},l=u,f=(a("53a1"),a("2877")),m=a("6544"),h=a.n(m),v=a("99d9"),p=a("62ad"),b=a("8fea"),y=a("132d"),g=a("0fd9"),x=a("b974"),H=a("2fa4"),M=a("8654"),T=a("71d9"),S=a("2a7f"),L=a("3a2f"),_=Object(f["a"])(l,r,n,!1,null,"86456baa",null),w=_.exports;h()(_,{VCardTitle:v["b"],VCol:p["a"],VDataTable:b["a"],VIcon:y["a"],VRow:g["a"],VSelect:x["a"],VSpacer:H["a"],VTextField:M["a"],VToolbar:T["a"],VToolbarTitle:S["a"],VTooltip:L["a"]});var k={name:"mossadotHours",components:{mossadHours:w},data:function(){return{}}},E=k,I=(a("7cb0"),Object(f["a"])(E,s,o,!1,null,"14a0f03d",null));e["default"]=I.exports},"159b":function(t,e,a){var s=a("da84"),o=a("fdbc"),r=a("17c2"),n=a("9112");for(var i in o){var c=s[i],d=c&&c.prototype;if(d&&d.forEach!==r)try{n(d,"forEach",r)}catch(u){d.forEach=r}}},"17c2":function(t,e,a){"use strict";var s=a("b727").forEach,o=a("a640"),r=a("ae40"),n=o("forEach"),i=r("forEach");t.exports=n&&i?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},"2a7f":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var s=a("71d9"),o=a("80d2");const r=Object(o["h"])("v-toolbar__title"),n=Object(o["h"])("v-toolbar__items");s["a"]},"2fa4":function(t,e,a){"use strict";a("20f6");var s=a("80d2");e["a"]=Object(s["h"])("spacer","div","v-spacer")},4160:function(t,e,a){"use strict";var s=a("23e7"),o=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"53a1":function(t,e,a){"use strict";var s=a("77aa"),o=a.n(s);o.a},"77aa":function(t,e,a){},"7cb0":function(t,e,a){"use strict";var s=a("8259"),o=a.n(s);o.a},"7db0":function(t,e,a){"use strict";var s=a("23e7"),o=a("b727").find,r=a("44d2"),n=a("ae40"),i="find",c=!0,d=n(i);i in[]&&Array(1)[i]((function(){c=!1})),s({target:"Array",proto:!0,forced:c||!d},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(i)},8259:function(t,e,a){},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){throw 1},1)}))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=mossadotHours.a0ba4524.js.map